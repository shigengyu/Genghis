{% extends "base.html" %}

{% load staticfiles %}

{% block head %}
<h2 class="pull-left">
	Article <span class="page-meta">Detail</span>
</h2>
{% endblock %}

{% block content %}
<div class="row-fluid">
	<div class="span9">

		<!-- Widget -->
		<div class="widget wblue">
			<!-- Widget head -->
			<div class="widget-head">
				<div class="pull-left">{{ article.subject }}</div>
				<div class="widget-icons pull-right">					
					{% if article.author == request.user %}
						<a href="/articles/update/{{ article.id }}"><i class="icon-edit"></i></a>
						<a href="/articles/delete/{{ article.id }}"><i class="icon-remove"></i></a>
					{% endif %}
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>

			<!-- Widget content -->
			<div class="widget-content">
				<div class="padd">
					{{ article.content }}
					
					{% if article.attachments.all %}
						<br /><br /><br />
						<h6>Attachments</h6>
						<hr />
						{% for attachment in article.attachments.all %}
							<a href="{% static 'uploaded' %}/{{ attachment.attachment }}" target="_blank">
								<i class="icon-file"></i> {{ attachment.name }}
							</a>&nbsp;
						{% endfor %}
					{% endif %}
				</div>
			</div>
			
			<div class="widget-foot">
				{% if article.create_date_time  %}
					Posted by <i>{{ article.author.get_full_name }}</i> on {{ article.create_date_time }}
				{% endif %}
				
				{% if article.update_date_time != article.create_date_time %}
					&nbsp;&nbsp;Last updated on {{ article.update_date_time }}
				{% endif %}
			</div>
		</div>
	</div>

	<div class="span3">
		<div class="widget worange">
			<div class="widget-head">
				<div class="pull-left">Tags</div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>

			<div class="widget-content">
				<div class="padd">
					{% if article.tags.all %}
						{% for tag in article.tags.all %}
							{{ tag.display_name }}
						{% endfor %}
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row-fluid">
	<div class="span9">

		<!-- Widget -->
		<div class="widget wblue">
			<!-- Widget head -->
			<div class="widget-head">
				<div class="pull-left">Comments</div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>

			<!-- Widget content -->
			<div class="widget-content">
				<div class="padd">
					{% for comment in article.articlecomment_set.all %}
						{{ comment.content }} -- {{ comment.author.get_full_name }} on {{ comment.update_date_time }}
					<hr />
					{% endfor %}
					{% include "article_comment_form.html" %}
				</div>
			</div>
			<!-- Widget ends -->
		</div>
	</div>
</div>

{% endblock %}
